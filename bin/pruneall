#!/bin/bash 

cd ${1-'.'} 

for file in * 
do 
  if [ -d $file ] 
  then 
    cd $file 
    if [ -d '.git' ] 
    then 
      M='Pruning' 
      echo ${M-''} `pwd` `git branch 2>/dev/null | grep -e '^*' | sed -E 's/^\* (.+)$/(\1) /'` 
      git fetch && git branch --merged | grep -v '\*' | xargs -n 1 git branch -d 
    fi 
    cd ../ 
  fi 
done